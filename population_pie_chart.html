<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Répartition de la Population par Zone - Aubervilliers</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        body { background-color: #0a0a0a; color: white; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; min-height: 100vh; margin: 0; padding-top: 50px; }
        h1 { color: #00a2ff; margin-bottom: 30px; }
        .chart-container { width: 80vw; max-width: 700px; background: #1a1a1a; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); }
        canvas { background-color: #1a1a1a !important; } /* Force le fond du graphique */
    </style>
</head>
<body>
     <div style="max-width: 800px; margin: 20px auto; padding: 20px; color: #bbbbbb; line-height: 1.6; border-left: 4px solid #00a2ff; background: #111; border-radius: 0 10px 10px 0;">
        <p>
            D'après le parcours que nous avons effectué le <strong>30/10/2025</strong> et mes remarques pendant mon chemin en vélo au <strong>Campus Condorcet</strong>, voici mon estimation du nombre de personnes présentes dans les zones géographiques que nous avons visitées :
        </p>
    </div>
    <h1>Répartition Estimée de la Population par Zone</h1>
    <div class="chart-container">
        <canvas id="populationPieChart"></canvas>
    </div>

    <script>
        const csvFilePath = 'https://raw.githubusercontent.com/Doudousml/Timeline/main/data_aubervilliers.csv'; // Chemin vers ton fichier CSV

        // Fonction pour générer des couleurs uniques
        function generateColors(num) {
            const colors = [];
            for (let i = 0; i < num; i++) {
                const hue = (i * 137.508) % 360; // Utilise le "golden angle" pour une bonne répartition
                colors.push(`hsl(${hue}, 70%, 50%)`); // Couleurs HSL pour la luminosité
            }
            return colors;
        }

        Papa.parse(csvFilePath, {
            download: true,
            header: true,
            complete: function(results) {
                const labels = results.data.map(row => row.Zone);
                const data = results.data.map(row => parseInt(row['Nombre de Personnes Estimé']));

                const backgroundColors = generateColors(labels.length);

                const ctx = document.getElementById('populationPieChart').getContext('2d');
                new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: data,
                            backgroundColor: backgroundColors,
                            hoverOffset: 10
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'right', // Place la légende à droite
                                labels: {
                                    color: 'white' // Couleur du texte de la légende
                                }
                            },
                            title: {
                                display: true,
                                text: 'Distribution Estimée des Personnes par Zone',
                                color: 'white' // Couleur du titre du graphique
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>